<!$Id: atmel-header.html 19278 2009-11-23 09:15:44Z sschneid $>
<html>
 <head>
  <meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
  <title>AVR2025: IEEE 802.15.4 MAC Reference Manual</title>
  <link href="doxygen.css" rel="stylesheet" type="text/css">
</head>
<body>

<table width="100%" height="10%" bgcolor="#FFFFFF">
  <tr>
    <td colspan="2"><p><A href=http://www.atmel.com ><img src="../..//graphics//atmel.jpg"/ border=0></A></p><br /></td>
    <td colspan="2"> <strong><font face="Helvetica" color="#000000" size="+3">Microcontroller Wireless Solutions</font></strong></td>
    <td colspan="2"><p><A href=http://www.atmel.com/products/AVR><img src="../..//graphics//AVR_logo_blue.gif"/ border=0></A></p><br /></td>
  </tr>
  <tr>
    <td colspan="6" height="1" background="../..//graphics//blue.gif"></td>
  </tr>
</table>
<!-- Generated by Doxygen 1.7.4 -->
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('a00011.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#define-members">Defines</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">pal_timer.c File Reference</div>  </div>
</div>
<div class="contents">

<p>Timer related functions for the ATmega128RFA1 Mega RF Single Chip.  
<a href="#details">More...</a></p>

<p><a href="a00011_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00011.html#a88fa737059e67b4b17ec980e5877361e">CONCAT</a>(a, b)&#160;&#160;&#160;a##b</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00011.html#a95004a8c125e925901b95b37dde8fa33">DELAY_WITHOUT_IRQS_US</a>&#160;&#160;&#160;(100)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00011.html#a8ac7fd2300078be8dcc692acabc69bd4">MASK_LOW27</a>&#160;&#160;&#160;(0x07FFFFFFuL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00011.html#a13cb32e3b0766345e5977fe8a31fae9c">MASK_LOW28</a>&#160;&#160;&#160;(0x0FFFFFFFuL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00011.html#a20488d209e9b9aa8964b484da77806f8">PAL_US_PER_SYMBOLS</a>&#160;&#160;&#160;(16)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00011.html#a51a6e3d293448a0ce4af64315c1722dd">SC_READ32</a>(reg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00011.html#a4e3b7bce66e5eb985a7433e661e95fc6">SC_WRITE32</a>(reg, val)</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00011.html#af92c4c2b0695e9d30e113b0c9843b257">compare_time</a> (uint32_t t1, uint32_t t2)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00011.html#a8caac840e75e6dcae95b474a701d6e88">internal_timer_handler</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00011.html#a6d1d7c75f7a7e5fa6efb2cf797b2ca57">pal_get_current_time</a> (uint32_t *current_time)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00011.html#ad15d15a4d0ffa89b390fb170d89f446d">pal_is_timer_running</a> (uint8_t timer_id)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">retval_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00011.html#aa40af7acb7cbc8898d85019c9f7ade00">pal_start_high_priority_timer</a> (uint8_t timer_id, uint16_t timer_count, FUNC_PTR timer_cb, void *param_cb)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">retval_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00011.html#a7658311cce894ccb2aee2674208e1f6c">pal_stop_high_priority_timer</a> (uint8_t timer_id)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00011.html#a1befdc5edc9e6a9f76895140552c7cba">pal_timer_delay</a> (uint16_t delay)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00011.html#a1d6ce37f64ee157533691b4113a8a14e">pal_timer_source_select</a> (<a class="el" href="a00004.html#ad81a470a533a77ac92563ea813734894">source_type_t</a> source)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">retval_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00011.html#ac1193577fceb4355c4ab1c1da84427ac">pal_timer_start</a> (uint8_t timer_id, uint32_t timer_count, <a class="el" href="a00004.html#a372aa39c6bac658707b2af4ff330479f">timeout_type_t</a> timeout_type, FUNC_PTR timer_cb, void *param_cb)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">retval_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00011.html#a3275711bd05a3ff991b076a18d0bfbd9">pal_timer_stop</a> (uint8_t timer_id)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00011.html#ac65df1a29e2f2f08f3be705a7b91de07">pal_trx_read_timestamp</a> (uint32_t *timestamp)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00011.html#ace9cd5d5f41df20ac486a6922745245e">prog_ocr</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00011.html#a45e6fc0665f1aacff8b63f5498bcc110">sc_read32</a> (volatile uint8_t *hh, volatile uint8_t *hl, volatile uint8_t *lh, volatile uint8_t *ll)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00011.html#a65c4161ffe54e248624e1a9e1f1a4795">SCNT_CMP1_vect</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00011.html#a35d3fb70eb171aca1574a41e33cb8baa">SCNT_CMP2_vect</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00011.html#adb45ac67a47117e58b3559aea02f6091">SCNT_CMP3_vect</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00011.html#ac50c88ce88e437ae16af9652cecad330">start_absolute_timer</a> (uint8_t timer_id, uint32_t point_in_time, FUNC_PTR handler_cb, void *parameter)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00011.html#a7b8ab79df77b57475a5494f5f81c3bd9">timer_init</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00011.html#af8c91ac68f554eeb8191f4dcdcf35ac4">timer_service</a> (void)</td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Timer related functions for the ATmega128RFA1 Mega RF Single Chip. </p>
<p>This file implements timer related functions for the ATmega128RFA1.</p>
<dl class="rcs"><dt><b>Id:</b></dt><dd><a class="el" href="a00011.html" title="Timer related functions for the ATmega128RFA1 Mega RF Single Chip.">pal_timer.c</a> 28726 2011-09-27 05:37:11Z yogesh.bellan </dd></dl>
<dl class="author"><dt><b>Author:</b></dt><dd>Atmel Corporation: <a href="http://www.atmel.com">http://www.atmel.com</a> </dd>
<dd>
Support email: <a href="mailto:avr@atmel.com">avr@atmel.com</a> </dd></dl>

<p>Definition in file <a class="el" href="a00011_source.html">pal_timer.c</a>.</p>
</div><hr/><h2>Define Documentation</h2>
<a class="anchor" id="a88fa737059e67b4b17ec980e5877361e"></a><!-- doxytag: member="pal_timer.c::CONCAT" ref="a88fa737059e67b4b17ec980e5877361e" args="(a, b)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CONCAT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">a, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">b&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;a##b</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>String concatenation by preprocessor used to create proper register names. </p>

<p>Definition at line <a class="el" href="a00011_source.html#l00081">81</a> of file <a class="el" href="a00011_source.html">pal_timer.c</a>.</p>

</div>
</div>
<a class="anchor" id="a95004a8c125e925901b95b37dde8fa33"></a><!-- doxytag: member="pal_timer.c::DELAY_WITHOUT_IRQS_US" ref="a95004a8c125e925901b95b37dde8fa33" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DELAY_WITHOUT_IRQS_US&#160;&#160;&#160;(100)</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Maximum delay in us that function <a class="el" href="a00004.html#a1befdc5edc9e6a9f76895140552c7cba" title="Generates blocking delay.">pal_timer_delay()</a> is running with interrupts disabled. If the delay is larger, interrupts need to be enabled inbetween. </p>

<p>Definition at line <a class="el" href="a00011_source.html#l00105">105</a> of file <a class="el" href="a00011_source.html">pal_timer.c</a>.</p>

<p>Referenced by <a class="el" href="a00011_source.html#l00802">pal_timer_delay()</a>.</p>

</div>
</div>
<a class="anchor" id="a8ac7fd2300078be8dcc692acabc69bd4"></a><!-- doxytag: member="pal_timer.c::MASK_LOW27" ref="a8ac7fd2300078be8dcc692acabc69bd4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MASK_LOW27&#160;&#160;&#160;(0x07FFFFFFuL)</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Unmask upper 5 bits. </p>

<p>Definition at line <a class="el" href="a00011_source.html#l00119">119</a> of file <a class="el" href="a00011_source.html">pal_timer.c</a>.</p>

<p>Referenced by <a class="el" href="a00011_source.html#l00188">compare_time()</a>.</p>

</div>
</div>
<a class="anchor" id="a13cb32e3b0766345e5977fe8a31fae9c"></a><!-- doxytag: member="pal_timer.c::MASK_LOW28" ref="a13cb32e3b0766345e5977fe8a31fae9c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MASK_LOW28&#160;&#160;&#160;(0x0FFFFFFFuL)</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Unmask upper 4 bits. </p>

<p>Definition at line <a class="el" href="a00011_source.html#l00116">116</a> of file <a class="el" href="a00011_source.html">pal_timer.c</a>.</p>

<p>Referenced by <a class="el" href="a00011_source.html#l00389">pal_start_high_priority_timer()</a>, <a class="el" href="a00011_source.html#l00303">pal_timer_start()</a>, and <a class="el" href="a00011_source.html#l01068">start_absolute_timer()</a>.</p>

</div>
</div>
<a class="anchor" id="a20488d209e9b9aa8964b484da77806f8"></a><!-- doxytag: member="pal_timer.c::PAL_US_PER_SYMBOLS" ref="a20488d209e9b9aa8964b484da77806f8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PAL_US_PER_SYMBOLS&#160;&#160;&#160;(16)</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Conversion factor: us per symbol for 2,4 GHz. </p>

<p>Definition at line <a class="el" href="a00011_source.html#l00122">122</a> of file <a class="el" href="a00011_source.html">pal_timer.c</a>.</p>

<p>Referenced by <a class="el" href="a00011_source.html#l00769">pal_get_current_time()</a>, <a class="el" href="a00011_source.html#l00389">pal_start_high_priority_timer()</a>, <a class="el" href="a00011_source.html#l00303">pal_timer_start()</a>, and <a class="el" href="a00011_source.html#l00788">pal_trx_read_timestamp()</a>.</p>

</div>
</div>
<a class="anchor" id="a51a6e3d293448a0ce4af64315c1722dd"></a><!-- doxytag: member="pal_timer.c::SC_READ32" ref="a51a6e3d293448a0ce4af64315c1722dd" args="(reg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SC_READ32</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">reg</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><a class="code" href="a00011.html#a45e6fc0665f1aacff8b63f5498bcc110" title="Reads the 32-bit timer register in the required order of bytes.">sc_read32</a>(&amp;<a class="code" href="a00011.html#a88fa737059e67b4b17ec980e5877361e">CONCAT</a>(reg,HH), \
                                                  &amp;<a class="code" href="a00011.html#a88fa737059e67b4b17ec980e5877361e">CONCAT</a>(reg,HL), \
                                                  &amp;<a class="code" href="a00011.html#a88fa737059e67b4b17ec980e5877361e">CONCAT</a>(reg,LH), \
                                                  &amp;<a class="code" href="a00011.html#a88fa737059e67b4b17ec980e5877361e">CONCAT</a>(reg,LL))
</pre></div><p>Creates proper subregister names and reads the corresponding values. </p>

<p>Definition at line <a class="el" href="a00011_source.html#l00084">84</a> of file <a class="el" href="a00011_source.html">pal_timer.c</a>.</p>

<p>Referenced by <a class="el" href="a00011_source.html#l00769">pal_get_current_time()</a>, <a class="el" href="a00011_source.html#l00389">pal_start_high_priority_timer()</a>, <a class="el" href="a00011_source.html#l00303">pal_timer_start()</a>, <a class="el" href="a00011_source.html#l00788">pal_trx_read_timestamp()</a>, and <a class="el" href="a00011_source.html#l00954">prog_ocr()</a>.</p>

</div>
</div>
<a class="anchor" id="a4e3b7bce66e5eb985a7433e661e95fc6"></a><!-- doxytag: member="pal_timer.c::SC_WRITE32" ref="a4e3b7bce66e5eb985a7433e661e95fc6" args="(reg, val)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SC_WRITE32</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">reg, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">val&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">do</span> { \
    <span class="keyword">union </span>{ uint8_t a[4]; uint32_t v; } x; \
    x.v = val; \
    <a class="code" href="a00011.html#a88fa737059e67b4b17ec980e5877361e">CONCAT</a>(reg,HH) = x.a[3]; \
    <a class="code" href="a00011.html#a88fa737059e67b4b17ec980e5877361e">CONCAT</a>(reg,HL) = x.a[2]; \
    <a class="code" href="a00011.html#a88fa737059e67b4b17ec980e5877361e">CONCAT</a>(reg,LH) = x.a[1]; \
    <a class="code" href="a00011.html#a88fa737059e67b4b17ec980e5877361e">CONCAT</a>(reg,LL) = x.a[0]; \
} <span class="keywordflow">while</span>(0)
</pre></div><p>Creates proper subregister names and writes the corresponding values. </p>

<p>Definition at line <a class="el" href="a00011_source.html#l00090">90</a> of file <a class="el" href="a00011_source.html">pal_timer.c</a>.</p>

<p>Referenced by <a class="el" href="a00011_source.html#l00389">pal_start_high_priority_timer()</a>, <a class="el" href="a00011_source.html#l00954">prog_ocr()</a>, and <a class="el" href="a00011_source.html#l00664">timer_init()</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="af92c4c2b0695e9d30e113b0c9843b257"></a><!-- doxytag: member="pal_timer.c::compare_time" ref="af92c4c2b0695e9d30e113b0c9843b257" args="(uint32_t t1, uint32_t t2)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static bool compare_time </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>t1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>t2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Compares two 32-bit time values. </p>
<p>This function compares two true 32-bit time values t1 and t2 and returns true if t1 is less than t2.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">t1</td><td>Time </td></tr>
    <tr><td class="paramname">t2</td><td>Time</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true If t1 is less than t2 when MSBs are same, false otherwise. </dd></dl>

<p>Definition at line <a class="el" href="a00011_source.html#l00188">188</a> of file <a class="el" href="a00011_source.html">pal_timer.c</a>.</p>

<p>References <a class="el" href="a00011_source.html#l00119">MASK_LOW27</a>.</p>

<p>Referenced by <a class="el" href="a00011_source.html#l00954">prog_ocr()</a>, and <a class="el" href="a00011_source.html#l01068">start_absolute_timer()</a>.</p>

</div>
</div>
<a class="anchor" id="a8caac840e75e6dcae95b474a701d6e88"></a><!-- doxytag: member="pal_timer.c::internal_timer_handler" ref="a8caac840e75e6dcae95b474a701d6e88" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void internal_timer_handler </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Internal timer handler. </p>
<p>This function checks for expired timers and rearranges the running timer queue head and expired timer queue head and tail if there are any expired timers. </p>

<p>Definition at line <a class="el" href="a00011_source.html#l01004">1004</a> of file <a class="el" href="a00011_source.html">pal_timer.c</a>.</p>

<p>References <a class="el" href="a00010_source.html#l00117">ENTER_CRITICAL_REGION</a>, <a class="el" href="a00010_source.html#l00120">LEAVE_CRITICAL_REGION</a>, and <a class="el" href="a00011_source.html#l00954">prog_ocr()</a>.</p>

<p>Referenced by <a class="el" href="a00011_source.html#l00472">pal_timer_stop()</a>, <a class="el" href="a00011_source.html#l01068">start_absolute_timer()</a>, and <a class="el" href="a00011_source.html#l00222">timer_service()</a>.</p>

</div>
</div>
<a class="anchor" id="a6d1d7c75f7a7e5fa6efb2cf797b2ca57"></a><!-- doxytag: member="pal_timer.c::pal_get_current_time" ref="a6d1d7c75f7a7e5fa6efb2cf797b2ca57" args="(uint32_t *current_time)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pal_get_current_time </td>
          <td>(</td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>current_time</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Gets current time. </p>
<p>This function returns the current time.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">current_time</td><td>Current system time </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="a00011_source.html#l00769">769</a> of file <a class="el" href="a00011_source.html">pal_timer.c</a>.</p>

<p>References <a class="el" href="a00011_source.html#l00122">PAL_US_PER_SYMBOLS</a>, and <a class="el" href="a00011_source.html#l00084">SC_READ32</a>.</p>

<p>Referenced by <a class="el" href="a00008_source.html#l00323">ISR()</a>.</p>

</div>
</div>
<a class="anchor" id="ad15d15a4d0ffa89b390fb170d89f446d"></a><!-- doxytag: member="pal_timer.c::pal_is_timer_running" ref="ad15d15a4d0ffa89b390fb170d89f446d" args="(uint8_t timer_id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool pal_is_timer_running </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>timer_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Checks if the timer with the requested timer identifier is running. </p>
<p>Checks if the timer of requested timer identifier is running.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">timer_id</td><td>Timer identifier</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><ul>
<li>true if timer with requested timer id is running,</li>
<li>false otherwise. </li>
</ul>
</dd></dl>

<p>Definition at line <a class="el" href="a00011_source.html#l00906">906</a> of file <a class="el" href="a00011_source.html">pal_timer.c</a>.</p>

</div>
</div>
<a class="anchor" id="aa40af7acb7cbc8898d85019c9f7ade00"></a><!-- doxytag: member="pal_timer.c::pal_start_high_priority_timer" ref="aa40af7acb7cbc8898d85019c9f7ade00" args="(uint8_t timer_id, uint16_t timer_count, FUNC_PTR timer_cb, void *param_cb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">retval_t pal_start_high_priority_timer </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>timer_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>timer_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FUNC_PTR&#160;</td>
          <td class="paramname"><em>timer_cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>param_cb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Starts high priority timer. </p>
<p>This function starts a high priority timer for the specified timeout.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">timer_id</td><td>Timer identifier </td></tr>
    <tr><td class="paramname">timer_count</td><td>Timeout in microseconds </td></tr>
    <tr><td class="paramname">timer_cb</td><td>Callback handler invoked upon timer expiry </td></tr>
    <tr><td class="paramname">param_cb</td><td>Argument for the callback handler</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><ul>
<li><a class="el" href="a00012.html#afc9d7f23dd99f89ef40b343ef0ca34d2a898f6f219ddac56862a5c0ccf63e8167">PAL_TMR_INVALID_ID</a> if the identifier is undefined,</li>
<li><a class="el" href="a00012.html#afc9d7f23dd99f89ef40b343ef0ca34d2af4639e7f4ea46472f951163c2ba1f4ff">MAC_INVALID_PARAMETER</a> if the callback function for this timer is NULL,</li>
<li><a class="el" href="a00012.html#afc9d7f23dd99f89ef40b343ef0ca34d2a5cbfa76ab701a27a85d8baf01f45c0b4">PAL_TMR_ALREADY_RUNNING</a> if the timer is already running, or</li>
<li><a class="el" href="a00012.html#afc9d7f23dd99f89ef40b343ef0ca34d2aaa459125b2699291c39a726ed288803f">MAC_SUCCESS</a> if timer is started successfully. </li>
</ul>
</dd></dl>

<p>Definition at line <a class="el" href="a00011_source.html#l00389">389</a> of file <a class="el" href="a00011_source.html">pal_timer.c</a>.</p>

<p>References <a class="el" href="a00010_source.html#l00117">ENTER_CRITICAL_REGION</a>, <a class="el" href="a00010_source.html#l00120">LEAVE_CRITICAL_REGION</a>, <a class="el" href="a00012_source.html#l00076">MAC_INVALID_PARAMETER</a>, <a class="el" href="a00012_source.html#l00039">MAC_SUCCESS</a>, <a class="el" href="a00011_source.html#l00116">MASK_LOW28</a>, <a class="el" href="a00012_source.html#l00058">PAL_TMR_ALREADY_RUNNING</a>, <a class="el" href="a00012_source.html#l00060">PAL_TMR_INVALID_ID</a>, <a class="el" href="a00011_source.html#l00122">PAL_US_PER_SYMBOLS</a>, <a class="el" href="a00011_source.html#l00084">SC_READ32</a>, and <a class="el" href="a00011_source.html#l00090">SC_WRITE32</a>.</p>

</div>
</div>
<a class="anchor" id="a7658311cce894ccb2aee2674208e1f6c"></a><!-- doxytag: member="pal_timer.c::pal_stop_high_priority_timer" ref="a7658311cce894ccb2aee2674208e1f6c" args="(uint8_t timer_id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">retval_t pal_stop_high_priority_timer </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>timer_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Stops a high priority timer. </p>
<p>This function stops a high priority timer.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">timer_id</td><td>Timer identifier</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><ul>
<li><a class="el" href="a00012.html#afc9d7f23dd99f89ef40b343ef0ca34d2a08386dc8dffe75c56c6727034c14523f">PAL_TMR_NOT_RUNNING</a> if the timer id does not match with the high priority timer register, or</li>
<li><a class="el" href="a00012.html#afc9d7f23dd99f89ef40b343ef0ca34d2aaa459125b2699291c39a726ed288803f">MAC_SUCCESS</a> otherwise. </li>
</ul>
</dd></dl>

<p>Definition at line <a class="el" href="a00011_source.html#l00634">634</a> of file <a class="el" href="a00011_source.html">pal_timer.c</a>.</p>

<p>References <a class="el" href="a00010_source.html#l00117">ENTER_CRITICAL_REGION</a>, <a class="el" href="a00010_source.html#l00120">LEAVE_CRITICAL_REGION</a>, <a class="el" href="a00012_source.html#l00039">MAC_SUCCESS</a>, and <a class="el" href="a00012_source.html#l00059">PAL_TMR_NOT_RUNNING</a>.</p>

</div>
</div>
<a class="anchor" id="a1befdc5edc9e6a9f76895140552c7cba"></a><!-- doxytag: member="pal_timer.c::pal_timer_delay" ref="a1befdc5edc9e6a9f76895140552c7cba" args="(uint16_t delay)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pal_timer_delay </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>delay</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Performes blocking delay. </p>
<p>Generates blocking delay.</p>
<p>This functions performs a blocking delay of the specified time.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">delay</td><td>in microseconds </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="a00011_source.html#l00802">802</a> of file <a class="el" href="a00011_source.html">pal_timer.c</a>.</p>

<p>References <a class="el" href="a00011_source.html#l00105">DELAY_WITHOUT_IRQS_US</a>.</p>

<p>Referenced by <a class="el" href="a00003_source.html#l00191">pal_alert()</a>, and <a class="el" href="a00011_source.html#l00664">timer_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a1d6ce37f64ee157533691b4113a8a14e"></a><!-- doxytag: member="pal_timer.c::pal_timer_source_select" ref="a1d6ce37f64ee157533691b4113a8a14e" args="(source_type_t source)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pal_timer_source_select </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00004.html#ad81a470a533a77ac92563ea813734894">source_type_t</a>&#160;</td>
          <td class="paramname"><em>source</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Selects timer clock source. </p>
<p>This function selects the clock source of the timer.</p>
<p>Unused for the ATmega128RFA1 because the MAC symbol counter automatically switches from XTAL1 to RTC when the transceiver module is put to sleep.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">source</td><td><ul>
<li><a class="el" href="a00004.html#aa6446bfa087f4f4151153c22fee74999abec1cd89a5bb9526defd6225a9e319e1">TMR_CLK_SRC_DURING_TRX_SLEEP</a> if clock source during sleep is to be selected, and</li>
<li><a class="el" href="a00004.html#aa6446bfa087f4f4151153c22fee74999a850a5455e0dc6ef5a081d741755a64c6">TMR_CLK_SRC_DURING_TRX_AWAKE</a> if clock source while being awake is selected. </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="a00011_source.html#l00754">754</a> of file <a class="el" href="a00011_source.html">pal_timer.c</a>.</p>

</div>
</div>
<a class="anchor" id="ac1193577fceb4355c4ab1c1da84427ac"></a><!-- doxytag: member="pal_timer.c::pal_timer_start" ref="ac1193577fceb4355c4ab1c1da84427ac" args="(uint8_t timer_id, uint32_t timer_count, timeout_type_t timeout_type, FUNC_PTR timer_cb, void *param_cb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">retval_t pal_timer_start </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>timer_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>timer_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00004.html#a372aa39c6bac658707b2af4ff330479f">timeout_type_t</a>&#160;</td>
          <td class="paramname"><em>timeout_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FUNC_PTR&#160;</td>
          <td class="paramname"><em>timer_cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>param_cb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Starts regular timer. </p>
<p>Start regular timer.</p>
<p>This function starts a regular timer and registers the corresponding callback function to handle the timeout event.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">timer_id</td><td>Timer identifier </td></tr>
    <tr><td class="paramname">timer_count</td><td>Timeout in microseconds </td></tr>
    <tr><td class="paramname">timeout_type</td><td><a class="el" href="a00004.html#a9bee3fa507802eec2c8f6ceeb0c49ea9a734599f0467ada87fd6fdeef14027807">TIMEOUT_RELATIVE</a> / <a class="el" href="a00004.html#a9bee3fa507802eec2c8f6ceeb0c49ea9acbb61438d427d222eaf4ca6cd3ce5494">TIMEOUT_ABSOLUTE</a> </td></tr>
    <tr><td class="paramname">timer_cb</td><td>Callback handler invoked upon timer expiry </td></tr>
    <tr><td class="paramname">param_cb</td><td>Argument for the callback handler</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><ul>
<li><a class="el" href="a00012.html#afc9d7f23dd99f89ef40b343ef0ca34d2a898f6f219ddac56862a5c0ccf63e8167">PAL_TMR_INVALID_ID</a> if the timer identifier is undefined,</li>
<li><a class="el" href="a00012.html#afc9d7f23dd99f89ef40b343ef0ca34d2af4639e7f4ea46472f951163c2ba1f4ff">MAC_INVALID_PARAMETER</a> if the callback function for this timer is NULL or timeout_type is invalid,</li>
<li><a class="el" href="a00012.html#afc9d7f23dd99f89ef40b343ef0ca34d2a5cbfa76ab701a27a85d8baf01f45c0b4">PAL_TMR_ALREADY_RUNNING</a> if the timer is already running,</li>
<li><a class="el" href="a00012.html#afc9d7f23dd99f89ef40b343ef0ca34d2aaa459125b2699291c39a726ed288803f">MAC_SUCCESS</a> if timer is started, or</li>
<li><a class="el" href="a00012.html#afc9d7f23dd99f89ef40b343ef0ca34d2aa6e521fae016ae600525d3e7f795da63">PAL_TMR_INVALID_TIMEOUT</a> if timeout is not within the timeout range. </li>
</ul>
</dd></dl>

<p>Definition at line <a class="el" href="a00011_source.html#l00303">303</a> of file <a class="el" href="a00011_source.html">pal_timer.c</a>.</p>

<p>References <a class="el" href="a00012_source.html#l00076">MAC_INVALID_PARAMETER</a>, <a class="el" href="a00012_source.html#l00039">MAC_SUCCESS</a>, <a class="el" href="a00011_source.html#l00116">MASK_LOW28</a>, <a class="el" href="a00010_source.html#l00211">MAX_TIMEOUT</a>, <a class="el" href="a00010_source.html#l00208">MIN_TIMEOUT</a>, <a class="el" href="a00012_source.html#l00058">PAL_TMR_ALREADY_RUNNING</a>, <a class="el" href="a00012_source.html#l00060">PAL_TMR_INVALID_ID</a>, <a class="el" href="a00012_source.html#l00061">PAL_TMR_INVALID_TIMEOUT</a>, <a class="el" href="a00011_source.html#l00122">PAL_US_PER_SYMBOLS</a>, <a class="el" href="a00011_source.html#l00084">SC_READ32</a>, <a class="el" href="a00011_source.html#l01068">start_absolute_timer()</a>, <a class="el" href="a00004_source.html#l00106">TIMEOUT_ABSOLUTE</a>, and <a class="el" href="a00004_source.html#l00104">TIMEOUT_RELATIVE</a>.</p>

</div>
</div>
<a class="anchor" id="a3275711bd05a3ff991b076a18d0bfbd9"></a><!-- doxytag: member="pal_timer.c::pal_timer_stop" ref="a3275711bd05a3ff991b076a18d0bfbd9" args="(uint8_t timer_id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">retval_t pal_timer_stop </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>timer_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Stops a running timer. </p>
<p>This function stops a running timer with the specified timer_id.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">timer_id</td><td>Timer identifier</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><ul>
<li><a class="el" href="a00012.html#afc9d7f23dd99f89ef40b343ef0ca34d2aaa459125b2699291c39a726ed288803f">MAC_SUCCESS</a> if the timer was stopped successfully,</li>
<li><a class="el" href="a00012.html#afc9d7f23dd99f89ef40b343ef0ca34d2a08386dc8dffe75c56c6727034c14523f">PAL_TMR_NOT_RUNNING</a> if the specified timer is not running,</li>
<li><a class="el" href="a00012.html#afc9d7f23dd99f89ef40b343ef0ca34d2a898f6f219ddac56862a5c0ccf63e8167">PAL_TMR_INVALID_ID</a> if the specified timer id is undefined. </li>
</ul>
</dd></dl>

<p>Definition at line <a class="el" href="a00011_source.html#l00472">472</a> of file <a class="el" href="a00011_source.html">pal_timer.c</a>.</p>

<p>References <a class="el" href="a00010_source.html#l00117">ENTER_CRITICAL_REGION</a>, <a class="el" href="a00011_source.html#l01004">internal_timer_handler()</a>, <a class="el" href="a00010_source.html#l00120">LEAVE_CRITICAL_REGION</a>, <a class="el" href="a00012_source.html#l00039">MAC_SUCCESS</a>, <a class="el" href="a00012_source.html#l00060">PAL_TMR_INVALID_ID</a>, <a class="el" href="a00012_source.html#l00059">PAL_TMR_NOT_RUNNING</a>, and <a class="el" href="a00011_source.html#l00954">prog_ocr()</a>.</p>

</div>
</div>
<a class="anchor" id="ac65df1a29e2f2f08f3be705a7b91de07"></a><!-- doxytag: member="pal_timer.c::pal_trx_read_timestamp" ref="ac65df1a29e2f2f08f3be705a7b91de07" args="(uint32_t *timestamp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pal_trx_read_timestamp </td>
          <td>(</td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>timestamp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Provides timestamp of the last received frame. </p>
<p>This function provides the timestamp (in microseconds) of the last received frame.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">timestamp</td><td>in microseconds </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="a00011_source.html#l00788">788</a> of file <a class="el" href="a00011_source.html">pal_timer.c</a>.</p>

<p>References <a class="el" href="a00011_source.html#l00122">PAL_US_PER_SYMBOLS</a>, and <a class="el" href="a00011_source.html#l00084">SC_READ32</a>.</p>

</div>
</div>
<a class="anchor" id="ace9cd5d5f41df20ac486a6922745245e"></a><!-- doxytag: member="pal_timer.c::prog_ocr" ref="ace9cd5d5f41df20ac486a6922745245e" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void prog_ocr </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Programs the output compare register SCOCR1. </p>
<p>This function programs the SCOCR1 register with the timeout value of the timer present at the head of the running timer queue. </p>

<p>Definition at line <a class="el" href="a00011_source.html#l00954">954</a> of file <a class="el" href="a00011_source.html">pal_timer.c</a>.</p>

<p>References <a class="el" href="a00011_source.html#l00188">compare_time()</a>, <a class="el" href="a00011_source.html#l00084">SC_READ32</a>, and <a class="el" href="a00011_source.html#l00090">SC_WRITE32</a>.</p>

<p>Referenced by <a class="el" href="a00011_source.html#l01004">internal_timer_handler()</a>, <a class="el" href="a00011_source.html#l00472">pal_timer_stop()</a>, and <a class="el" href="a00011_source.html#l01068">start_absolute_timer()</a>.</p>

</div>
</div>
<a class="anchor" id="a45e6fc0665f1aacff8b63f5498bcc110"></a><!-- doxytag: member="pal_timer.c::sc_read32" ref="a45e6fc0665f1aacff8b63f5498bcc110" args="(volatile uint8_t *hh, volatile uint8_t *hl, volatile uint8_t *lh, volatile uint8_t *ll)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static uint32_t sc_read32 </td>
          <td>(</td>
          <td class="paramtype">volatile uint8_t *&#160;</td>
          <td class="paramname"><em>hh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">volatile uint8_t *&#160;</td>
          <td class="paramname"><em>hl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">volatile uint8_t *&#160;</td>
          <td class="paramname"><em>lh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">volatile uint8_t *&#160;</td>
          <td class="paramname"><em>ll</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reads the 32-bit timer register in the required order of bytes. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">hh</td><td>hh octet of 32-bit register </td></tr>
    <tr><td class="paramname">hl</td><td>hl octet of 32-bit register </td></tr>
    <tr><td class="paramname">lh</td><td>lh octet of 32-bit register </td></tr>
    <tr><td class="paramname">ll</td><td>ll octet of 32-bit register</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>uint32_t Value of timer register </dd></dl>

</div>
</div>
<a class="anchor" id="a65c4161ffe54e248624e1a9e1f1a4795"></a><!-- doxytag: member="pal_timer.c::SCNT_CMP1_vect" ref="a65c4161ffe54e248624e1a9e1f1a4795" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCNT_CMP1_vect </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Timer1 COMPA ISR. </p>
<p>This is the interrupt service routine for timer1 output compare match. It is triggered when a timer expires. </p>

</div>
</div>
<a class="anchor" id="a35d3fb70eb171aca1574a41e33cb8baa"></a><!-- doxytag: member="pal_timer.c::SCNT_CMP2_vect" ref="a35d3fb70eb171aca1574a41e33cb8baa" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCNT_CMP2_vect </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>ISR to limit the MAC symbol counter to 28 bits width. </p>
<p>The current counter value will be advanced to -1, so it rolls over to 0 at the next timer tick. </p>

</div>
</div>
<a class="anchor" id="adb45ac67a47117e58b3559aea02f6091"></a><!-- doxytag: member="pal_timer.c::SCNT_CMP3_vect" ref="adb45ac67a47117e58b3559aea02f6091" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCNT_CMP3_vect </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>ISR for high priority timer, triggered by SCOCR2. </p>
<p>This is the interrupt service routine for SCOCR2 output compare match. It is triggered when a high priority timer expires. </p>

</div>
</div>
<a class="anchor" id="ac50c88ce88e437ae16af9652cecad330"></a><!-- doxytag: member="pal_timer.c::start_absolute_timer" ref="ac50c88ce88e437ae16af9652cecad330" args="(uint8_t timer_id, uint32_t point_in_time, FUNC_PTR handler_cb, void *parameter)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void start_absolute_timer </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>timer_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>point_in_time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FUNC_PTR&#160;</td>
          <td class="paramname"><em>handler_cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>parameter</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Start a timer by setting its absolute expiration time. </p>
<p>This function starts a timer which should expire at the point_in_time value and upon timer expiry the function held by the handler is called.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">timer_id</td><td>Timer identifier </td></tr>
    <tr><td class="paramname">point_in_time</td><td>Absolute expiration time in microseconds </td></tr>
    <tr><td class="paramname">handler_cb</td><td>Function called upon timer expiry </td></tr>
    <tr><td class="paramname">parameter</td><td>Parameter passed to the expired timer handler </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="a00011_source.html#l01068">1068</a> of file <a class="el" href="a00011_source.html">pal_timer.c</a>.</p>

<p>References <a class="el" href="a00011_source.html#l00188">compare_time()</a>, <a class="el" href="a00010_source.html#l00117">ENTER_CRITICAL_REGION</a>, <a class="el" href="a00011_source.html#l01004">internal_timer_handler()</a>, <a class="el" href="a00010_source.html#l00120">LEAVE_CRITICAL_REGION</a>, <a class="el" href="a00011_source.html#l00116">MASK_LOW28</a>, and <a class="el" href="a00011_source.html#l00954">prog_ocr()</a>.</p>

<p>Referenced by <a class="el" href="a00011_source.html#l00303">pal_timer_start()</a>.</p>

</div>
</div>
<a class="anchor" id="a7b8ab79df77b57475a5494f5f81c3bd9"></a><!-- doxytag: member="pal_timer.c::timer_init" ref="a7b8ab79df77b57475a5494f5f81c3bd9" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void timer_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function is called to initialize the timer module. </p>

<p>Definition at line <a class="el" href="a00011_source.html#l00664">664</a> of file <a class="el" href="a00011_source.html">pal_timer.c</a>.</p>

<p>References <a class="el" href="a00011_source.html#l00802">pal_timer_delay()</a>, and <a class="el" href="a00011_source.html#l00090">SC_WRITE32</a>.</p>

<p>Referenced by <a class="el" href="a00003_source.html#l00050">pal_init()</a>.</p>

</div>
</div>
<a class="anchor" id="af8c91ac68f554eeb8191f4dcdcf35ac4"></a><!-- doxytag: member="pal_timer.c::timer_service" ref="af8c91ac68f554eeb8191f4dcdcf35ac4" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void timer_service </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Timer handling services. </p>
<p>This Function performs timer handling services. It calls functions which are responsible 1) to put the expired timer into the expired timer queue, and 2) to service expired timers and call the respective callback. </p>

<p>Definition at line <a class="el" href="a00011_source.html#l00222">222</a> of file <a class="el" href="a00011_source.html">pal_timer.c</a>.</p>

<p>References <a class="el" href="a00010_source.html#l00117">ENTER_CRITICAL_REGION</a>, <a class="el" href="a00011_source.html#l01004">internal_timer_handler()</a>, and <a class="el" href="a00010_source.html#l00120">LEAVE_CRITICAL_REGION</a>.</p>

<p>Referenced by <a class="el" href="a00003_source.html#l00079">pal_task()</a>.</p>

</div>
</div>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="a00011.html">pal_timer.c</a>      </li>
<!$Id: atmel-footer.html 19276 2009-11-23 09:04:48Z sschneid $>
<html>
 <head>
  <meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
  <title>@DOC_TITLE@</title>
  <link href="doxygen.css" rel="stylesheet" type="text/css">
</head>
<body>

<table width="100%" height="10%" bgcolor="#FFFFFF">
  <tr>
    <td colspan="6" height="1" background="..//img//blue.gif"></td>
  </tr>

  <tr>
    <td colspan="6">
    <address style="align: right;"><small>
Generated on Wed Oct 19 2011 09:37:10 for Platform Reference Manual - RCB V6.3 with ATmega128RFA1 by <a href="http://www.doxygen.org/index.html"><img src="doxygen.png" alt="doxygen" align="middle" border=0></a> 1.7.4</small></address>
    </td>
  </tr>

</table>
